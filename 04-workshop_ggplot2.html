<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Introduction to ggplot2</title>
    <meta charset="utf-8" />
    <meta name="author" content="Zoë Turner" />
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="libs/panelset-0.2.6/panelset.css" rel="stylesheet" />
    <script src="libs/panelset-0.2.6/panelset.js"></script>
    <script src="libs/clipboard-2.0.6/clipboard.min.js"></script>
    <link href="libs/xaringanExtra-clipboard-0.2.6/xaringanExtra-clipboard.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-clipboard-0.2.6/xaringanExtra-clipboard.js"></script>
    <script>window.xaringanExtraClipboard(null, {"button":"Copy Code","success":"Copied!","error":"Press Ctrl+C to Copy"})</script>
    <link href="libs/shareon-1.4.1/shareon.min.css" rel="stylesheet" />
    <script src="libs/shareon-1.4.1/shareon.min.js"></script>
    <link href="libs/xaringanExtra-shareagain-0.2.6/shareagain.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-shareagain-0.2.6/shareagain.js"></script>
    <link rel="stylesheet" href="css/nhsr.css" type="text/css" />
    <link rel="stylesheet" href="css/nhsr-fonts.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">




class: title-slide, left, bottom

&lt;img src="img/session04/ggplot2_masterpiece.PNG" width="40%"/&gt;

# Introduction to ggplot2
----
## **Session 4**
### Zoë Turner
### 

.right-column[

]

.footnote[Artwork by @allison_horst]

---

# Acknowledgement

This session shadows [Chapter 3](https://r4ds.had.co.nz/data-visualisation.html) of the excellent:

&lt;img class="center" src="img/session04/r-for-data-science.PNG" width="40%"/&gt;

---

# ggplot2

Is one of several plotting systems in R

&lt;img class="center" src="img/session04/tweet-poll.PNG" width="40%"/&gt;

{plotly} is used by [Public Health Scotland](https://github.com/Public-Health-Scotland/scotpho-plotly-charts/blob/master/plotly_chart_functions.R)
---

# Why is ggplot popular?
&lt;/br&gt;

&lt;/br&gt; 1. Well designed and supported &lt;/br&gt; 
&lt;/br&gt; 2. Highly versatile &lt;/br&gt; 
&lt;/br&gt; 3. Attractive graphics (with a little work)

.footnote[1. Why start with ggplot : http://varianceexplained.org/r/teach_ggplot2_to_beginners/
2. Argument against:
https://simplystatistics.org/2016/02/11/why-i-dont-use-ggplot2/]

---

[&lt;/br&gt; &lt;img class="center" src="img/session04/bbc-plots.PNG"/&gt;](https://bbc.github.io/rcookbook/#left-alignright-align_text)

---

# ggplot2
&lt;/br&gt;

&lt;/br&gt; ggplot2 is part of the tidyverse. &lt;/br&gt;
&lt;/br&gt; So, at the top of your script type:


```r
library(tidyverse)
```

---

class: inverse, middle, center

## Project 1: &lt;/br&gt;
&lt;/br&gt; Let’s explore a perennial &lt;/br&gt;
&lt;/br&gt; challenge for the NHS:

---

# Pressures in A&amp;E

&lt;/br&gt; &lt;img class="center" src="img/session04/demand-and-capacity.PNG"/&gt;

.footnote[
1. [Picture 1](https://www.deviantart.com/luckymarine577/art/Animated-Ambulance-338970039) by Unknown Author is licensed under [CC BY SA NC](https://creativecommons.org/licenses/by-nc-sa/3.0/)
2. [Picture 2](https://creativecommons.org/licenses/by-nc-sa/3.0/) by Unknown Author is licensed under [CC BY SA NC](https://creativecommons.org/licenses/by-nc-sa/3.0/)
]

---

# Data: Capacity in A&amp;E
&lt;/br&gt;

The dataset we loaded earlier, `capacity_ae`, shows &lt;/br&gt;
&lt;/br&gt; changes in the capacity of A&amp;E departments from &lt;/br&gt;
&lt;/br&gt; 2017 to 2018

.footnote[Closely based on datasets collected by the NHS Benchmarking Network]

--
&lt;/br&gt;

&lt;/br&gt; The object named .green[capacity_ae] is a data frame

---

## What is a data frame?

A data frame stores tabular data:

&lt;img class="center" src="img/session04/tidydata_1.JPG" width="90%"/&gt;

.footnote[Artwork by @allison_horst]


---

## tibble = data frame

In the tidyverse you may see the term "tibble" &lt;/br&gt;
&lt;/br&gt; We’ll take "tibble" to be synonymous with "data frame"

&lt;/br&gt;
&gt;A tibble... is a modern reimagining of the data.frame...
&gt;
&gt;Tibbles are data.frames that are .blue[lazy and surly]: they do less (i.e. they don’t change variable names or types, and don’t do partial matching) and .blue[complain more] (e.g. when a variable does not exist). 
&gt;
&gt; This forces you to confront problems earlier, typically leading to cleaner, more expressive code. 

.footnote[emphasis added to [quote](https://tibble.tidyverse.org/)]

---

## Viewing the data frame

### Option 1

&lt;img class="center" src="img/session04/view-data-frame.PNG" width="90%"/&gt;

---

## Viewing the data frame

This brings up a view of the data in a new tab:

&lt;img class="center" src="img/session04/view-capacity-ae.PNG" width="90%"/&gt;

---

## Viewing the data frame

Click here to show the data frame in a new window

&lt;img class="center" src="img/session04/open-view-window.PNG" width="90%"/&gt;

Useful when using multiple monitors

---

## Viewing the data frame

### Option 2

Type the name of the dataset in editor/console, and
run the line (shortcut &lt;kbd&gt; Ctrl + Enter&lt;/kbd&gt;)

&lt;img class="center" src="img/session04/view-data-frame2.PNG" width="60%"/&gt;

---

class: inverse, center, middle

## Q. Do we understand the variable names?

_(and what they mean)_

--

&lt;img class="center" src="img/session04/variable-names.PNG" width="60%"/&gt;

---

### "The simple graph has brought more information to the data analyst's mind than any other device"

&lt;img class="center" src="img/session04/ggplot2_exploratory.PNG" width="50%"&gt;

.footnote[John Tukey, quoted in [R for Data Science](https://r4ds.had.co.nz/data-visualisation.html)]

---

# Graphs with ggplot2

&lt;/br&gt;

## Q. Is a change in the number of cubicles available in A&amp;E associated with a change in length of attendance?

--

&lt;img class="center" src="img/session04/axes-description.png"&gt;

---

# Q. Is a change in the number of cubicles available in A&amp;E associated with a change in length of attendance?

Note that R is case sensitive.


```r
ggplot(data = capacity_ae) +
  geom_point(aes(x = dcubicles, y = dwait))
```

---

# Let's explain the code

1. We begin our plot with ggplot2


```r
ggplot() + 
```

---

# Let's explain the code

1. We begin our plot with ggplot2

1. Inside ggplot() we can specify the dataset


```r
ggplot(data = capacity_ae)  
```

---

# Let's explain the code

1. We begin our plot with ggplot2

1. Inside ggplot() we can specify the dataset

1. Next, we add layer(s) with + at the end


```r
ggplot(data = capacity_ae) + 
  geom_point(aes(x = dcubicles, y = dwait))
```

---

class: center, middle

# Choices

There are choices about the chart to use but also the details of the chart

&lt;img class="center" src="img/session04/pie_charts.JPG" width="80%"/&gt;

---

class: center, middle

# Choices

&lt;/br&gt; 

&lt;/br&gt; 1. What shape will represent the data points?
&lt;/br&gt; 
&lt;/br&gt; 

# .black[&lt;svg viewBox="0 0 512 512" style="position:relative;display:inline-block;top:.1em;height:2em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M512 512H0V0h512v512z"&gt;&lt;/path&gt;&lt;/svg&gt;]

---

class: center, middle

# Choices
&lt;/br&gt; 

&lt;/br&gt; 1. What shape will represent the data points?
&lt;/br&gt;
&lt;/br&gt; 

# .black[&lt;svg viewBox="0 0 512 512" style="position:relative;display:inline-block;top:.1em;height:2em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"&gt;&lt;/path&gt;&lt;/svg&gt;]

.pull-right[
.blue[**geom**]etric 
object]

---

class: center, middle

# Choices

.darkgrey[
1\. What shape will represent the data? .blue[geom]] 
2\. What visual (.blue[**aes**]thetic attributes do we give to the geom?)

# .black[&lt;svg viewBox="0 0 512 512" style="position:relative;display:inline-block;top:.1em;height:2em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"&gt;&lt;/path&gt;&lt;/svg&gt;]

---

class: center, middle

# Choices

.darkgrey[
1\. What shape will represent the data? .blue[geom]] 

2\. What visual (.blue[**aes**]thetic attributes do we give to the geom?)

# .black[&lt;svg viewBox="0 0 512 512" style="height:1em;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"&gt;&lt;/path&gt;&lt;/svg&gt;]

.pull-right[
## .blue[size]
]

---

class: center, middle

# Choices

.darkgrey[
1\. What shape will represent the data? .blue[geom]] 

2\. What visual (.blue[**aes**]thetic attributes do we give to the geom?)

# &lt;svg viewBox="0 0 512 512" style="position:relative;display:inline-block;top:.1em;height:2em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M377.941 169.941V216H134.059v-46.059c0-21.382-25.851-32.09-40.971-16.971L7.029 239.029c-9.373 9.373-9.373 24.568 0 33.941l86.059 86.059c15.119 15.119 40.971 4.411 40.971-16.971V296h243.882v46.059c0 21.382 25.851 32.09 40.971 16.971l86.059-86.059c9.373-9.373 9.373-24.568 0-33.941l-86.059-86.059c-15.119-15.12-40.971-4.412-40.971 16.97z"&gt;&lt;/path&gt;&lt;/svg&gt; .black[&lt;svg viewBox="0 0 512 512" style="position:relative;display:inline-block;top:.1em;height:2em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"&gt;&lt;/path&gt;&lt;/svg&gt;]

.pull-right[
## position (x axis)
]

---

class: center, middle

# Choices

.darkgrey[
1\. What shape will represent the data? .blue[geom]] 

2\. What visual (.blue[**aes**]thetic attributes do we give to the geom?)

# &lt;svg viewBox="0 0 256 512" style="position:relative;display:inline-block;top:.1em;height:2em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M214.059 377.941H168V134.059h46.059c21.382 0 32.09-25.851 16.971-40.971L144.971 7.029c-9.373-9.373-24.568-9.373-33.941 0L24.971 93.088c-15.119 15.119-4.411 40.971 16.971 40.971H88v243.882H41.941c-21.382 0-32.09 25.851-16.971 40.971l86.059 86.059c9.373 9.373 24.568 9.373 33.941 0l86.059-86.059c15.12-15.119 4.412-40.971-16.97-40.971z"&gt;&lt;/path&gt;&lt;/svg&gt; .black[&lt;svg viewBox="0 0 512 512" style="position:relative;display:inline-block;top:.1em;height:2em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"&gt;&lt;/path&gt;&lt;/svg&gt;]

.pull-right[
## position (y axis)
]

---

class: center, middle

# Choices

.darkgrey[
1\. What shape will represent the data? .blue[geom]] 

2\. What visual (.blue[**aes**]thetic attributes do we give to the geom?)

# &lt;svg viewBox="0 0 512 512" style="position:relative;display:inline-block;top:.1em;height:2em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"&gt;&lt;/path&gt;&lt;/svg&gt;

.pull-right[
## colour
]

---

# A statistical graphic

Shape/colour/size &lt;svg viewBox="0 0 448 512" style="height:1em;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"&gt;&lt;/path&gt;&lt;/svg&gt; geom all default


```r
ggplot(data = capacity_ae) + 
* geom_point(aes(x = dcubicles, y = dwait))
```

---

class: middle, center

# Functions ()

ggplot(), geom_point(), and aes() are functions &lt;/br&gt; 

&lt;/br&gt; Running a function does something &lt;/br&gt; 
&lt;/br&gt; Functions are given zero or more inputs (arguments) &lt;/br&gt; 
&lt;/br&gt; Arguments of a function are separated by commas

---

class: center

# Functions ()

&lt;/br&gt; You can explicitly name arguments; &lt;/br&gt; 


```r
ggplot(data = capacity_ae) +
```

&lt;/br&gt; Or not: &lt;/br&gt; 


```r
ggplot(capacity_ae) +
```

---

# Functions ()

&lt;/br&gt; Other arguments like axes x and y are in a particular order; &lt;/br&gt; 


```r
ggplot(data = capacity_ae) + 
* geom_point(aes(x = dcubicles, y = dwait))
```

&lt;/br&gt; It is possible to write it like:


```r
ggplot(data = capacity_ae) + 
* geom_point(aes(y = dwait, x = dcubicles))
```

But could be confusing.
---

# Functions ()

Here, we have provided **ggplot()** with one named argument

.pull-right[
.darkgrey[ggplot(.blue[**data = capacity_ae**]) + 
&lt;/br&gt;
geom_point(.blue[**aes(x = dcubicles, y = dwait)**])]
]


And given **aes()** two named arguments &lt;/br&gt;

&lt;/br&gt; Unspecified (yet required) arguments will often revert to .green[default values]

---

# Shorthand

Since ggplot2 knows the order of essential arguments, it is not necessary to name arguments:

.green[data = can be omitted &lt;/br&gt;] 

and 

.green[x = goes first and y = goes second]


```r
ggplot(capacity_ae) + 
* geom_point(aes(dcubicles, dwait))
```



---

# geoms

We tend to describe plots in terms of the geom used:

&lt;/br&gt; &lt;img class="center" src="img/session04/geoms.PNG" width="80%"/&gt;

---

# Layering geoms

We can display more than one geom in a plot:

.blue[&lt;svg viewBox="0 0 448 512" style="height:1em;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"&gt;&lt;/path&gt;&lt;/svg&gt;] to add a layer

&lt;/br&gt;

ggplot(data = capacity_ae) .blue[&lt;svg viewBox="0 0 448 512" style="height:1em;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"&gt;&lt;/path&gt;&lt;/svg&gt;] 
&lt;/br&gt; .blue[geom_point](aes(x = dcubicles, y = dwait)) .blue[&lt;svg viewBox="0 0 448 512" style="height:1em;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"&gt;&lt;/path&gt;&lt;/svg&gt;] 
&lt;/br&gt; .blue[geom_smooth] aes(x = dcubicles, y = dwait))

&lt;/br&gt;

.blue[then specify another geom...]
  
---

# Your turn

This is our current plot:


```r
ggplot(data = capacity_ae) + 
  geom_point(aes(x = dcubicles, y = dwait))
```

&lt;/br&gt; Add a geom_smooth layer (to help identify patterns)

&lt;/br&gt; Hint: Don't forget the .blue[+] and aes() values in the new layer

---

# Your turn - Answer


```r
ggplot(data = capacity_ae) + 
  geom_point(aes(x = dcubicles, y = dwait)) +
  geom_smooth(aes(x = dcubicles, y = dwait))
```

---

![](04-workshop_ggplot2_files/figure-html/unnamed-chunk-13-1.png)&lt;!-- --&gt;

---

# One more thing

We'd probably prefer a linear fit rather than a non linear fit:


```r
ggplot(data = capacity_ae) + 
  geom_point(aes(x = dcubicles, y = dwait)) +
  geom_smooth(aes(x = dcubicles, y = dwait),
*             method = "lm")
```

---

![](04-workshop_ggplot2_files/figure-html/unnamed-chunk-14-1.png)&lt;!-- --&gt;

---

# What is happening here?

![](04-workshop_ggplot2_files/figure-html/plot-outliers-1.png)&lt;!-- --&gt;

---

class: center, middle

# Hypothesis

&lt;/br&gt; The two sites have seen staffing increases

&lt;/br&gt; We can map point .blue[colour] (aesthetic attribute) to the staff_increase variable to find out

&lt;/br&gt; We will add colour to the chart depending on the value of staff_increase (TRUE or FALSE, 1 or 0)

---

# Adding another dimension

Put an argument **inside** aes() if you want a visual attribute to change with different values of a variable.


```r
ggplot(data = capacity_ae) + 
  geom_point(aes(x = dcubicles, y = dwait, 
*                colour = staff_increase)) +
  geom_smooth(aes(x = dcubicles, y = dwait),
              method = "lm") 
```

&lt;/br&gt; We could have equally have chosen size or shape but these make graphic less clear

---

# What is happening here? - Answer

The two sites have indeed seen an increase in staff levels which has had an effect on the dwait even though dcubicles are relatively low.

&lt;img src="04-workshop_ggplot2_files/figure-html/unnamed-chunk-15-1.png" width="50%" /&gt;

---

# Important distinction

If you want a visual attribute to be applied across the whole plot, the argument goes **outside** aes():


```r
ggplot(data = capacity_ae) + 
* geom_point(aes(x = dcubicles, y = dwait),
                 colour = "red") + 
  geom_smooth(aes(x = dcubicles, y = dwait),
              method = "lm") 
```

&lt;/br&gt; This works too because the colour is generically applied:


```r
ggplot(data = capacity_ae) + 
* geom_point(aes(x = dcubicles, y = dwait,
                 colour = "red")) + 
  geom_smooth(aes(x = dcubicles, y = dwait),
              method = "lm") 
```

---

# Important distinction

Or apply a size globally:


```r
ggplot(data = capacity_ae) + 
* geom_point(aes(x = dcubicles, y = dwait),
*                size = "4") +
  geom_smooth(aes(x = dcubicles, y = dwait),
              method = "lm") 
```

---

# Layering geoms

To avoid duplication, we can pass the common local aes() arguments to ggplot to make them global. Instead of duplicating the same aes(dcublicles, dwait):


```r
ggplot(data = capacity_ae) +
* geom_point(aes(dcubicles, dwait)) +
* geom_smooth(aes(dcubicles, dwait))
```

&lt;/br&gt; Move the aes to the "global":


```r
ggplot(data = capacity_ae, aes(dcubicles, dwait)) +
* geom_point() +
* geom_smooth()
```

---

# Small multiples magic

Another way to visualise the relationship between multiple variables is with a facet_wrap() layer:


```r
ggplot(data = capacity_ae) + 
  geom_point(aes(x = dcubicles, y = dwait)) +
* facet_wrap(~ staff_increase)
```

---

# Small multiples 

Another way to visualise the relationship between multiple variables is with a facet_wrap() layer:


```r
ggplot(data = capacity_ae) + 
  geom_point(aes(x = dcubicles, y = dwait)) +
  facet_wrap(~ staff_increase,
*            ncol = 1)
```
---

class: center, middle

# Demonstrating geom charts

(note: these are simple,
&lt;/br&gt; unpolished graphics)

---

# Q. How are “wait” values distributed?

## Histogram


```r
ggplot(data = capacity_ae) + 
  geom_histogram(aes(dwait))
```

---

# Q. How are “wait” values distributed?

## Histogram


```r
ggplot(data = capacity_ae) + 
  geom_histogram(aes(dwait),
                 binwidth = 10)
```

&lt;/br&gt; With "bins" set so more uniformed in spread:


---

# Q. Number of attendances by site?

## Bar plot


```r
ggplot(data = capacity_ae) +
  geom_col(aes (x = site,
                y = attendance2018))
```

--

&lt;/br&gt; Reorder site __by__ attendances


```r
ggplot(data = capacity_ae) +
* geom_col(aes (x = reorder(site, attendance2018),
                y = attendance2018))
```

---

# Q. Number of attendances by site?

## Boxplot


```r
ggplot(data = capacity_ae) +
  geom_boxplot(aes(staff_increase, dwait))
```

--

### Plot labels

Can be applied to all types of charts:


```r
ggplot(data = capacity_ae) +
  geom_boxplot(aes(staff_increase, dwait)) +
* labs(title = "Do changes in staffing...",
*      y = "Waiting")
```

---

# To save a plot


```r
ggplot(data = capacity_ae) + 
  geom_point(aes(x = dcubicles, y = dwait)) + 
  geom_smooth(aes(x = dcubicles, y = dwait),
              method = "lm") +
* ggsave("plot_name.png")
```

---

# To save a plot


```r
ggplot(data = capacity_ae) + 
  geom_point(aes(x = dcubicles, y = dwait)) + 
  geom_smooth(aes(x = dcubicles, y = dwait),
              method = "lm") +
* ggsave("plot_name.png", units = "cm",
*        height = 10, width = 8)
```

&lt;/br&gt; By default saves a plot in the same dimensions as plot window.

In future, you'll wish to add height, width and "units" arguments to specify plot dimensions.

---
#### This work is licensed as
&lt;/br&gt; Creative Commons
&lt;/br&gt; Attribution
&lt;/br&gt; ShareAlike 4.0
&lt;/br&gt; International
&lt;/br&gt; To view a copy of this license, visit
&lt;/br&gt; https://creativecommons.org/licenses/by/4.0/
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "googlecode",
"highlightLines": true,
"highlightLanguage": "r",
"countIncrementalSlides": false,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>
<!--Hat-tip: https://www.garrickadenbuie.com/blog/xaringan-tip-logo-all-slides/-->
  <style>
  .logo {
    background-image: url(img/logo-blue.png);
    background-size: contain;
    background-repeat: no-repeat;
    position: absolute;
    top: 1em;
    right: 1em;
    width: 100px;
    height: 118px;
    z-index: 0;
  }
</style>
  
  <script>
  document
.querySelectorAll(
  '.remark-slide-content' +
    ':not(.title-slide)' +
    // add additional classes to exclude here, e.g.
  ':not(.inverse)' +
    ':not(.hide-logo)'
)
.forEach(el => {
  el.innerHTML += '<div class="logo"></div>';
});
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
